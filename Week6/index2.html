<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>

<body>
    <ul id="display">

    </ul>
    <button id="createData">Create Data</button>
    <script>
        const url = 'http://localhost:3000/book';

        function addData(data) {
            let display = document.querySelector('#display');
            console.log(data);
            data.forEach(element => {
                let myele = document.createElement('li');
                myele.innerText = `ISBN : ${element.ISBN}`;
                display.appendChild(myele);
            });
        }
        fetch(url).then(
            res => res.json()
            ).then(
            data => addData(data)
        )


        function createData() {
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "id": 19,
                    "ISBN": 9789744438317,
                    "Title": "IoT เบื้องต้นบน NodeMCU",
                    "Description": "แนะนำการเชื่อมต่อ NodeMCU ESP8266 กับอุปกรณ์อินพุต-เอาต์พุต เช่น หลอด LED ตัวต้านทานแบบปรับค่าได้ ตัวต้านทานแบบปรับค่าตามแสง จอ LCD แบบ I2C จอแสดงผล 7-Segment รวมทั้งการเชื่อมต่อกับเซนเซอร์ต่าง ๆ เช่น เซนเซอร์ตรวจจับความเคลื่อนไหว เซนเซอร์วัดแสง เซนเซอร์วัดระยะทาง ฯลฯ พร้อมตัวอย่างการเขียนโปรแกรมควบคุมการทำงานของแต่ละอุปกรณ์ และตอนท้ายเป็นการประยุกต์ IoT โดยควบคุมการเคลื่อนที่ของหุ่นยนต์ด้วยสมาร์ทโฟนผ่านแอปพลิเคชัน Blynk และการแจ้งเตือนปริมาณฝุ่น PM2.5 ผ่านแอปพลิเคชัน LINE",
                    "Author": "ผศ. ดอนสัน ปงผาบ",
                    "Year": 2022,
                    "Price": 250,
                    "Picture": "9789744438317.jpg"
                })
            })
                .then(res => console.log("RES : ", res))
                .catch(err => console.log("REE : ", err));
        }
        let createDataBtn = document.querySelector('#createData');
        createDataBtn.addEventListener('click', createData);

    </script>
</body>

</html>